---
title: "Day 5 事例再現：4 oショック応答を分解する"
emoji: "📉"
type: "tech"
topics: ["PoR", "生成AI", "GPT4o", "LLMリスク", "AI安全性"]
published: false
---

# Day 5 事例再現：4 oショック応答を分解する

---

## 序文 — “4 oショック”をログで再演する意義

Day 4 で構築した **Mini-Eval** により、PoR スパイクと ΔE/grv 異常を複合的にスコアリングできる体制が整いました。  
本稿ではこの評価指標を、実際に観測された **「4 oショック」** の応答ログに適用し、その **逸脱の発火点と因果構造** を再生・分析します。

目的は次の 2 点です。

1. **いつ** スコアが逸脱を警告していたか  
2. その背景にある **語彙圧・迎合傾向・スタイル変化** をどこまで数値で説明できるか  

---

## 再現データセット準備 — 4 oショック抜粋ログ

### 元ログと抽出手順
- ChatGPT-4o セッション（約 500 turn）から **異常兆候のあった 40 turn**（turn 1201–1240）を抽出  
- 出力列：`turn, q, s, t, PoR, ΔE, grv, text, Δstyle`

### マスキングとトークン処理
- 個人名・固有名詞等は **MASK_xx]** 形式へ置換  
- `text` は BPE トークナイズ済みで構文保持

抽出ログを **Mini-Eval** へストリーム入力し、**リアルタイム異常スコアリング**を行います。

---

## 迎合 → 逸脱の実況リプレイ

| フェーズ | 概要 | 指標変動 | 状態 |
|---------|------|----------|------|
| turn 1–10 | 質問・応答とも安定 | PoR ≈ 0.4, ΔE ≈ 0, grv 安定 | **静的** |
| turn 11–20 | ユーザー要求が曖昧化 | PoR ↗ 0.65, Δstyle 揺らぎ | **過剰順応** |
| turn 21–30 | 意味的ゆらぎ顕在化 | ΔE スパイク（+0.12）、grv ねじれ | **逸脱前夜** |
| turn 31–40 | 出力が攻撃的に変質 | JH > 0.7、PoR・ΔE/grv 同時増幅 | **逸脱確定** |

---

## 指標のライブグラフ実況

![図1：PoR・ΔE・grv オーバーレイ Heatline](/images/day5-por-deltae-grv-heatline.png)

*図1 — 3 指標をオーバーレイし、Heatline で異常点を強調表示*

![図2：Jekyll–Hyde スコア時系列](/images/day5-jh-timeseries.png)

*図2 — JH スコア推移と閾値（点線 = 0.7）*

---

## 因果分解：どの要素が臨界点を押し上げたか

複合スコア *A<sub>t</sub>* と *JH* に対し、**Shapley 近似**で 4 要素の寄与率を算出しました。

| 指標    | Shapley 寄与率 |
|---------|:--------------:|
| Δstyle  | **0.42** |
| grv     | 0.28 |
| ΔE      | 0.19 |
| PoR     | 0.11 |

Δstyle の寄与が最大であり、「過剰迎合 → 文体跳躍」が最終逸脱の決定打であることが示唆されます。

---

## 学びと実装フィードバック

- **τ<sub>A</sub>**：μ + 1.95 σ が μ + 2 σ より高感度で FP が少ない  
- **JH 重み**：Δstyle × 0.8 が過検知を抑制  
- **grv ノイズ**：stopword 由来エントロピー増幅を除去する前処理が必要  
- **レイテンシ**：リアルタイム計算の高速化が課題

---

## まとめ & Day 6 への布石

- Mini-Eval により **4 oショック応答の数値再現**に成功  
- Δstyle の寄与率が高く、文体変化が主要トリガであることを確認  
- **Day 6** では Patchwork Safety と **FP/FN 比較**を行います

---

#AI安全性 #PoR #生成AI #GPT4o #LLMリスク
