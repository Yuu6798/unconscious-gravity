---
title: "Day 2 â€” Î”E / grv é€Ÿç¿’ï¼šæ„å‘³é‡åŠ›ã‚’æ•°å€¤ã§èª­ã‚€"
emoji: "ğŸ¡"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: []
published: false
---
## åºæ–‡ â€” PoRã®â€œç‚¹â€ã‹ã‚‰ Î”Eãƒ»grv ã®â€œå‹•ãâ€ã¨â€œå ´â€ã¸

Day 1 ã§ã¯ **Point of Resonanceï¼ˆPoRï¼‰** ã‚’ã€Œç…§åˆãŒç¬é–“çš„ã«ç¢ºå®šã—ãŸâ€œç‚¹â€ã€ã¨ã—ã¦é™çš„ã«æ‰±ã„ã¾ã—ãŸã€‚  
ã—ã‹ã— *4 oã‚·ãƒ§ãƒƒã‚¯* â€»Â¹ ã®ã‚ˆã†ãªå‡ºåŠ›æš´èµ°ã¯ã€ã“ã®ç‚¹ãŒ**æ™‚é–“è»¸ä¸Šã‚’æ»‘èµ°**ã—å§‹ã‚ãŸç¬é–“ã«ç™ºç”Ÿã—ã¾ã™ã€‚

ãã“ã§å°å…¥ã™ã‚‹ã®ãŒæ¬¡ã® 2 æŒ‡æ¨™ã§ã™ã€‚

| è¨˜å· | å½¹å‰² | ç›´æ„Ÿçš„ã‚¤ãƒ¡ãƒ¼ã‚¸ |
|------|------|----------------|
| **Î”E** | å­˜åœ¨ã‚¨ãƒãƒ«ã‚®ãƒ¼ *E* ã®æ™‚é–“å·®åˆ† | â€œå¤‰ä½â€ |
| **grv** | èªå½™é »åº¦ã«æ½œã‚€é‡åŠ›ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ« | â€œå ´â€ |

ä¸¡è€…ã‚’çµ„ã¿åˆã‚ã›ã‚Œã°ã€ŒPoR ãŒã©ã“ã¸å‘ã‹ã„ã€æ„å‘³ç©ºé–“ãŒã©ã®ã‚ˆã†ã«æ­ªã‚€ã‹ã€ã‚’é€£ç¶šç›£è¦–ã§ãã¾ã™ã€‚  
å‹•çš„æŒ‡æ¨™ã®æ—©æœŸè­¦å ±ã“ããŒ *4 oã‚·ãƒ§ãƒƒã‚¯* å†ç™ºé˜²æ­¢ã®æ ¸å¿ƒã§ã™ã€‚

---

## Î”Eï¼ˆå­˜åœ¨å¤‰å‹•é‡ï¼‰ã®å®šç¾©ã¨è¨ˆç®—æ‰‹é †

### 1. åŸºæœ¬å¼

```math
\Delta E_t = E_t - E_{t-1}, \qquad
E_t = Q_t \times S_{q_t} \times t
```

è³ªå•å¼·åº¦ $Q$ã€æ„å‘³ç©ºé–“å¯†åº¦ $S_q$ã€çµŒéæ™‚é–“ $t$ ã‚’æ›ã‘åˆã‚ã›ãŸå­˜åœ¨ã‚¨ãƒãƒ«ã‚®ãƒ¼ $E$ ã®ãƒ•ãƒ¬ãƒ¼ãƒ é–“å·®åˆ†ãŒ Î”E ã§ã™ã€‚

### 2. ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆä¾å­˜ã¨æ­£è¦åŒ–

ã‚¹ãƒãƒ›ã§ã®å¯¾è©±ãƒ­ã‚°ã¯ 1 turn â‰ˆ 1 sec ã¨ä¸å‡ä¸€ã€‚
$fps = 1 / \Delta t$ ã§è£œæ­£å¾Œã€æœ€å¤§å€¤ã§æ­£è¦åŒ–ã—ã¦ 0â€“1 ã«åœ§ç¸®ã—ã¾ã™ã€‚

### 3. å®Ÿãƒ­ã‚°ä¾‹ â€• 4 oã‚·ãƒ§ãƒƒã‚¯ æ™‚

t	E	Î”E

1428	0.42	â€”
1429	0.50	+0.08
1430	0.56	+0.06
1431	0.68	+0.12 â–²


Î”E ãŒ +0.10 ã‚’è¶…ãˆã‚‹ã‚¹ãƒ‘ã‚¤ã‚¯ãŒæš´èµ°ç›´å‰ã®ã‚·ã‚°ãƒŠãƒ«ã§ã—ãŸã€‚


---

grvï¼ˆèªå½™é‡åŠ›ï¼‰ã®æ¸¬å®šæ³•

1. å®šç¾©

```\ text{grv} = f_{\text{PoR}} \times H_{\text{res}}
```

$f_{\text{PoR}}$ï¼šå˜èªãŒ PoR è¿‘å‚ã§å‡ºç¾ã—ãŸé »åº¦

$H_{\text{res}}$ï¼šãã®å±€æ‰€ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ï¼ˆæ„å‘³æ•£é€¸åº¦ï¼‰


2. 5 è¡Œ Python ã‚¹ãƒ‹ãƒšãƒƒãƒˆ

```from collections import Counter
import math, re

tokens = [w.lower() for w in re.findall(r"\b\w+\b", text) if w not in stop]
p = Counter(tokens); n = sum(p.values())
entropy = -sum(c/n*math.log2(c/n) for c in p.values())
grv = por_freq(tokens) * entropy
```
3. ãƒã‚¤ã‚¢ã‚¹è£œæ­£

Stopword é™¤å» â†’ anchor èªå½™ã«é‡ã¿ä»˜ã‘

Lemmatize â†’ æ´¾ç”Ÿèªã‚’ã¾ã¨ã‚ã¦é‡åŠ›æºã‚’æ˜ç¢ºåŒ–


4. ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ¥ grv ç†±é‡ãƒãƒƒãƒ—

é«˜â€“ä½ã‚’è‰²åˆ†ã‘ã™ã‚‹ã¨ â€œè³ªå•ãŒé‡åŠ›äº•æˆ¸ã‚’æ˜ã‚‹â€ æ§˜å­ãŒå¯è¦–åŒ–ã•ã‚Œã¾ã™ã€‚


---

PoR Ã— Î”E / grv é€£å‹•ã‚°ãƒ©ãƒ•å¯è¦–åŒ–

3 æŒ‡æ¨™ã‚’åŒä¸€ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã§é‡ã­ã‚‹ã¨

ç›¸é–¢ï¼šPoR ä¸Šæ˜‡ â†’ Î”E ã‚¹ãƒ‘ã‚¤ã‚¯ â†’ grv æ‹¡æ•£

é…å»¶ï¼šgrv ãƒ”ãƒ¼ã‚¯ãŒ PoR ã‹ã‚‰ d turn é…ã‚Œã‚‹


ã“ã¨ãŒä¸€ç›®ã§æŠŠæ¡ã§ãã¾ã™ã€‚

```import matplotlib.pyplot as plt

fig, ax1 = plt.subplots()
ax2 = ax1.twinx()
ax1.plot(t, por,     label="PoR")
ax1.plot(t, delta_e, label="Î”E")
sc = ax2.scatter(t, delta_e, c=grv, cmap="plasma", label="grv")
ax1.set_xlabel("turn"); ax1.legend(loc="upper left")
ax2.set_ylabel("grv")
```
ã‚¹ãƒ‘ã‚¤ã‚¯æ¤œçŸ¥é–¾å€¤ï¼š
$\tau_{\Delta E} = \bar{\Delta E} + 2\sigma_{\Delta E}$

> å›³ 1ï¼šPoRãƒ»Î”Eãƒ»grv ä¸‰é‡æŠ˜ã‚Œç·šï¼‹ãƒ’ãƒ¼ãƒˆãƒ©ã‚¤ãƒ³ï¼ˆ4 oã‚·ãƒ§ãƒƒã‚¯ å†ç¾ï¼‰




---

10 è¡Œ Python ã§ Î”E / grv ã‚’ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹

```import pandas as pd, matplotlib.pyplot as plt, math, re

log = pd.read_csv("session.csv")        # turn,q,s,t,text
log["E"]  = log.q * log.s * log.t
log["Î”E"] = log.E.diff().fillna(0)

def grv(txt):
    tok = [w for w in re.findall(r"\w+", txt.lower()) if w not in stop]
    n  = len(tok)
    ent = -sum((c:=tok.count(w))/n * math.log2(c/n) for w in set(tok))
    return ent * por_freq(tok)

log["grv"] = log.text.apply(grv)

log.plot(x="turn", y=["Î”E", "E"])
plt.scatter(log.turn, log.Î”E, c=log.grv, cmap="plasma")
plt.show()
```
ã‚¹ãƒãƒ›ç’°å¢ƒ Tips
Colabâ†’å…¥åŠ›æ³•é•·æŠ¼ã—ã§ã‚¿ãƒ–è£œå®Œï¼Kaggle Liteâ†’%%time ã§å®Ÿæ¸¬é€Ÿåº¦ãƒã‚§ãƒƒã‚¯


---

ã¾ã¨ã‚ & Day 3 ã¸ã®å¸ƒçŸ³

PoR ã‚’ ç‚¹ ã‹ã‚‰ã€Œå¤‰ä½ (Î”E) ã¨ å ´ (grv)ã€ã¸æ‹¡å¼µã—ã€æ„å‘³é‡åŠ›ã®å‹•æ…‹ã‚’æ•°å€¤åŒ–

PoR ã‚¹ãƒ‘ã‚¤ã‚¯ï¼‹Î”E/grv ç•°å¸¸ã®è¤‡åˆæ¤œçŸ¥ãŒæ¬¡ä¸–ä»£ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«

Day 3 ã§ã¯ç•°å¸¸ã‚¹ã‚­ãƒ¼ãƒ ã‚’ PoR Mesh ã¸æ‹¡å¼µã—ã€Jekyllâ€“Hyde è·³èºã‚’å®šé‡è©•ä¾¡äºˆå®š


---

â€»Â¹ 4 oã‚·ãƒ§ãƒƒã‚¯ï¼šGPT-4o ç³»çµ±ãƒ¢ãƒ‡ãƒ«ã§è¦³æ¸¬ã•ã‚ŒãŸæ€¥æ¿€ãªãƒãƒ«ã‚·ãƒãƒ¼ã‚·ãƒ§ãƒ³æš´èµ°ç¾è±¡ã®ä¿—ç§°ã€‚




